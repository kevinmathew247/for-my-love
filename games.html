<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Games ‚ù§Ô∏è</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <!--===== HEADER =====-->
    <header class="l-header">
        <nav class="nav bd-grid">
            <div>
                <a href="index.html" class="nav__logo">Archu & Kevin‚ù§Ô∏è</a>
            </div>

            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a href="index.html" class="nav__link">Home</a></li>
                    <li class="nav__item"><a href="index.html#music" class="nav__link">Music</a></li>
                    <li class="nav__item"><a href="milestones.html" class="nav__link">Milestones</a></li>
                    <li class="nav__item"><a href="gallery.html" class="nav__link">Gallery</a></li>
                    <li class="nav__item"><a href="games.html" class="nav__link active-link">Games</a></li>
                </ul>
            </div>

            <div class="nav__toggle" id="nav-toggle">
                <i class='bx bx-menu'></i>
            </div>
        </nav>
    </header>
    <div class="light-garland" aria-hidden="true">
        <span class="bulb bulb-red"></span>
        <span class="bulb bulb-gold"></span>
        <span class="bulb bulb-green"></span>
        <span class="bulb bulb-pink"></span>
        <span class="bulb bulb-gold"></span>
        <span class="bulb bulb-red"></span>
        <span class="bulb bulb-green"></span>
        <span class="bulb bulb-gold"></span>
        <span class="bulb bulb-pink"></span>
        <span class="bulb bulb-green"></span>
    </div>
    <div class="snow-layer" aria-hidden="true">
        <span></span><span></span><span></span><span></span><span></span>
        <span></span><span></span><span></span><span></span><span></span>
        <span></span><span></span><span></span><span></span><span></span>
        <span></span><span></span><span></span><span></span><span></span>
        <span></span><span></span><span></span><span></span><span></span>
        <span></span><span></span><span></span><span></span><span></span>
    </div>

    <main class="l-main">
        <section class="section">
            <h2 class="section-title">Game Time üé≤</h2>
            <div class="game-grid">
                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">üé°</span>
                        <h3>Spin a Date Idea</h3>
                    </div>
                    <p id="date-idea" class="game-text">Tap spin to plan our next cozy moment.</p>
                    <button class="button game-button" id="spin-date">Spin</button>
                </div>
                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">ü§î</span>
                        <h3>Would You Rather</h3>
                    </div>
                    <p id="wyr" class="game-text">Let‚Äôs see what you pick...</p>
                    <button class="button game-button" id="new-wyr">Shuffle</button>
                </div>
                <div class="game-card">
                    <div class="game-header">
                        <span class="game-icon">‚ú®</span>
                        <h3>Memory Spark</h3>
                    </div>
                    <p id="spark" class="game-text">Pull a prompt and reminisce.</p>
                    <button class="button game-button" id="draw-spark">Draw</button>
                </div>
            </div>
        </section>

        <section class="section wordle-section">
            <h2 class="section-title">Couples Wordle ‚ù§Ô∏èüî§</h2>
            <div class="wordle-card">
                <div class="wordle-top">
                    <div class="wordle-players">
                        <button class="button game-button wordle-start" id="wordle-start">Start / Reset</button>
                    </div>
                    <div class="wordle-status">
                        <div id="wordle-date"></div>
                        <div id="wordle-tries">Tries: 0 / 6</div>
                    </div>
                </div>

                <div class="wordle-grid" id="wordle-grid" aria-live="polite"></div>

                <div class="wordle-inputs">
                    <input id="wordle-guess" maxlength="5" placeholder="type 5-letter word" aria-label="Wordle guess">
                    <button class="button game-button" id="wordle-submit">Submit</button>
                </div>
                <p class="wordle-message" id="wordle-message" aria-live="polite"></p>
            </div>
        </section>
    </main>

    <!--===== FOOTER =====-->
    <footer class="footer">
        <p class="footer__title">With Love ‚ù§Ô∏è</p>
        <div class="footer__social">
            <a href="https://www.instagram.com/_kevin_mathew_?igsh=MXJlcWR0Ym10NTFtZA==" class="footer__icon"><i class='bx bxl-instagram'></i></a>
            <a href="https://www.instagram.com/archanajose?igsh=dHBkY3Jrdnp2dGU5" class="footer__icon"><i class='bx bxl-instagram'></i></a>
        </div>
        <p class="footer__copy">Our forever space ¬© 2025</p>
    </footer>

    <!--===== HAMBURGER MENU JS =====-->
    <script>
        const toggle = document.getElementById('nav-toggle');
        const menu = document.getElementById('nav-menu');
        const navLinks = document.querySelectorAll('.nav__link');

        if (toggle && menu) {
            toggle.addEventListener('click', () => {
                menu.classList.toggle('show');
            });
        }

        navLinks.forEach((link) => {
            link.addEventListener('click', () => {
                navLinks.forEach((l) => l.classList.remove('active-link'));
                link.classList.add('active-link');
                if (menu) {
                    menu.classList.remove('show');
                }
            });
        });
    </script>

    <script>
        const dateIdeas = [
            "Watch the same movie and live-text reactions üçø",
            "Dress up fancy for a virtual dinner date ‚ú®",
            "Cook something together on video‚Äîsame dish, taste-test together üë©‚Äçüç≥üë®‚Äçüç≥",
            "Plan our next travel itinerary üó∫Ô∏è",
            "Write a short love letter for each other and exchange it on call",
            "Write 5 reasons we love each other and swap ‚ù§Ô∏è",
            "Dance party on video‚Äîno excuses üíÉüï∫",
            "Draw each other on call in 5 mins üì∏",
            "Build a shared playlist with 3 songs each üéß"
        ];

        const wyrPrompts = [
            "Snowy cabin weekend or beach sunrise getaway?",
            "Cook dinner together or order in and play games?",
            "Slow dance in the living room or stargaze on a rooftop?",
            "Match PJs night or dress-up date at home?",
            "Love letter swap or voice-note confessions?",
            "Board game marathon or puzzle-building night?",
            "Make a dessert together or mix mocktails together?",
            "Karaoke battle or duet serenade?",
            "Sunset walk or sunrise coffee?",
            "Plan a spontaneous day or plan a perfect itinerary?"
        ];

        const memorySparks = [
            "What little moment made you realize you were falling for me?",
            "Pick one song that now reminds you of us and tell me why.",
            "Describe a future ordinary day together that sounds perfect.",
            "What‚Äôs your favorite thing we do to handle long distance?",
            "Share a tiny habit of mine you secretly love.",
            "If we could relive one video call, which would it be and why?",
            "Describe the exact hug you‚Äôre saving for me.",
            "What‚Äôs a new tradition you want us to start next time we meet?",
            "What did you feel the first time you saw my smile?",
        ];

        function randomPick(list) { return list[Math.floor(Math.random() * list.length)]; }
        function setText(id, text) { const el = document.getElementById(id); if (el) el.innerText = text; }

        const spinBtn = document.getElementById('spin-date');
        const wyrBtn = document.getElementById('new-wyr');
        const sparkBtn = document.getElementById('draw-spark');

        if (spinBtn) { spinBtn.addEventListener('click', () => setText('date-idea', randomPick(dateIdeas))); setText('date-idea', randomPick(dateIdeas)); }
        if (wyrBtn) { wyrBtn.addEventListener('click', () => setText('wyr', randomPick(wyrPrompts))); setText('wyr', randomPick(wyrPrompts)); }
        if (sparkBtn) { sparkBtn.addEventListener('click', () => setText('spark', randomPick(memorySparks))); setText('spark', randomPick(memorySparks)); }
    </script>

    <script>
        // Wordle setup
        const WORD_LIST = [
            "candy","dream","heart","shine","story","grace","light","sweet","spark","brave",
            "smile","sunny","honey","beach","olive","apple","cabin","flora","bloom","lucky",
            "happy","faith","quiet","swoon","cupid","toast","cocoa","angel","piano","music",
            "amber","crown","mango","jazzy","ocean","pasta","daisy","lemon","charm","vibes", 
            "mirth","noble","royal","vivid","fairy","gleam","novel","bliss","peace","grins",
            "cheer","sugar","frost","jolly","snugs","buddy","bunny","cloud","lilac","satin",
            "berry","spice","cider","greek","pride","magic","flame","twirl","fable","amour",
            "glory","bound","about","other","which","their","there","after","again","later",
            "maybe","never","today","night","world","water","house","place","point","right",
            "think","great","small","large","thing","times","sound","laugh","still","bring",
            "sorry","early","every","party","child","words","money","month","taste","paint",
            "write","reads","books","phone","grape","peach","bread","sauce","salad","pizza",
            "curry","sushi","tacos","nacho","pesto","mocha","latte","wafer","fudge","cream",
            "couch","chair","table","shelf","coast","river","mount","field","woods","trail",
            "grass","solar","lunar","plant","petal","tulip","queen","guard","arrow","sword",
            "trust","dance","swing","salsa","tango","drums","songs","tunes","voice","notes",
            "choir","movie","drama","scary","ghost","silly","funny","games","cards","chess",
            "poker","skill","learn","teach","study","class","tests","score","proud","smart",
            "brain","ideas","goals","build","craft","poems","photo","image","treat","cakes",
            "donut","baker","spoon","knife","plate","glass","serve","meals","diner","lunch",
            "fried","bacon","shake","fruit","juice","squad","teams","coach","shoot","match",
            "rally","share","cared","lovey","above","alone","along","among","anger","angry",
            "apart","apply","argue","armed","aside","basic","begin","below","birth","black",
            "blood","board","break","brown","catch","cause","check","chest","chief","clean",
            "clear","climb","close","color","count","drink","earth","enjoy","enter","equal",
            "event","false","favor","fever","final","first","floor","found","fresh","front",
            "giant","globe","green","heavy","horse","human","humor","ideal","issue","least",
            "leave","level","limit","model","mouth","north","piece","pilot","power","press",
            "price","prime","quick","raise","reach","ready","relax","reply","round","sense",
            "short","shout","sleep","smell","smoke","south","space","stage","start","state",
            "stone","thank","these","those","throw","tiger","touch","train","truth","uncle",
            "under","until","waste","watch","white","whole","woman","women","worry","worth",
            "would","young","youth","zebra","ahead","alert","alike","alive","angle","ankle",
            "beads","beams","bench","birds","blade","blame","bleed","bless","blind","block",
            "blues","bored","broad","broke","cable","camps","carry","carol","carve","chant",
            "chase","chill","civic","clerk","clock","clown","could","cover","daily","dairy",
            "darts","dirty","doing","doubt","dozen","drive","eight","empty","error","essay",
            "exact","fancy",
        ];

        const validWordSet = new Set();
        let isValidWordListReady = false;

        const gridEl = document.getElementById('wordle-grid');
        const guessInput = document.getElementById('wordle-guess');
        const submitBtn = document.getElementById('wordle-submit');
        const startBtn = document.getElementById('wordle-start');
        const triesEl = document.getElementById('wordle-tries');
        const dateEl = document.getElementById('wordle-date');
        const messageEl = document.getElementById('wordle-message');

        let currentDateStr = getTodayStr();
        let secret = pickSecretForDate(currentDateStr);
        let currentRow = 0;
        let currentGuess = "";
        const maxRows = 6;
        const wordLength = 5;

        initGrid();
        updateMeta();
        scheduleMidnightReset();
        loadValidWords();

        function hashDate(str) {
            let h = 0;
            for (let i = 0; i < str.length; i++) {
                h = (h << 5) - h + str.charCodeAt(i);
                h |= 0;
            }
            return h;
        }

        function getTodayStr() {
            return new Date().toISOString().slice(0,10);
        }

        function pickSecretForDate(dateStr) {
            const idx = Math.abs(hashDate(dateStr)) % WORD_LIST.length;
            return WORD_LIST[idx].toUpperCase();
        }

        async function loadValidWords() {
            try {
                const res = await fetch('valid-wordle-words.txt');
                const text = await res.text();
                validWordSet.clear();
                text.split(/\s+/).forEach((word) => {
                    const cleaned = word.trim().toUpperCase();
                    if (cleaned.length === wordLength) {
                        validWordSet.add(cleaned);
                    }
                });
                isValidWordListReady = true;
                setMessage("New 5-letter word every day. 6 tries.", "");
            } catch (err) {
                console.error("Failed to load valid Wordle words.", err);
                setMessage("Could not load the valid word list. Please refresh.", "error");
            }
        }

        function initGrid() {
            if (!gridEl) return;
            gridEl.innerHTML = "";
            for (let r = 0; r < maxRows; r++) {
                for (let c = 0; c < wordLength; c++) {
                    const cell = document.createElement('div');
                    cell.className = 'wordle-cell';
                    cell.dataset.row = r;
                    cell.dataset.col = c;
                    gridEl.appendChild(cell);
                }
            }
        }

        function updateMeta() {
            if (triesEl) triesEl.textContent = `Tries: ${currentRow} / ${maxRows}`;
            if (dateEl) dateEl.textContent = `Word for ${currentDateStr}`;
        }

        function setMessage(text, type = '') {
            if (!messageEl) return;
            messageEl.textContent = text;
            messageEl.classList.remove('error', 'success');
            if (type) messageEl.classList.add(type);
        }

        function resetGame(shouldFocus = false) {
            currentRow = 0;
            currentGuess = "";
            initGrid();
            updateMeta();
            setMessage("New 5-letter word every day. 6 tries.", "");
            if (guessInput) {
                guessInput.value = "";
                if (shouldFocus) {
                    guessInput.focus();
                }
            }
        }

        function renderGuess(guess, row) {
            for (let i = 0; i < wordLength; i++) {
                const cell = gridEl.querySelector(`[data-row='${row}'][data-col='${i}']`);
                if (cell) cell.textContent = guess[i] || "";
            }
        }

        function colorRow(guess, row) {
            const secretCounts = {};
            for (const ch of secret) secretCounts[ch] = (secretCounts[ch] || 0) + 1;

            const cells = [];
            for (let i = 0; i < wordLength; i++) {
                const cell = gridEl.querySelector(`[data-row='${row}'][data-col='${i}']`);
                cells.push(cell);
            }

            // first pass for correct
            for (let i = 0; i < wordLength; i++) {
                if (guess[i] === secret[i]) {
                    cells[i].classList.add('correct');
                    secretCounts[guess[i]] -= 1;
                }
            }
            // second pass for present/absent
            for (let i = 0; i < wordLength; i++) {
                if (cells[i].classList.contains('correct')) continue;
                if (secretCounts[guess[i]] > 0) {
                    cells[i].classList.add('present');
                    secretCounts[guess[i]] -= 1;
                } else {
                    cells[i].classList.add('absent');
                }
            }
        }

        function handleSubmit() {
            if (!guessInput) return;
            const raw = guessInput.value.trim().toUpperCase();
            if (!isValidWordListReady) {
                setMessage("Word list is still loading. Try again in a moment.", "error");
                return;
            }
            if (raw.length !== wordLength) {
                setMessage("Please enter a 5-letter word.", "error");
                return;
            }
            if (!/^[A-Z]{5}$/.test(raw)) {
                setMessage("Letters only, 5 characters.", "error");
                return;
            }
            if (!validWordSet.has(raw)) {
                setMessage("Not in the valid Wordle list.", "error");
                return;
            }
            renderGuess(raw, currentRow);
            colorRow(raw, currentRow);
            currentRow += 1;
            updateMeta();
            guessInput.value = "";

            if (raw === secret) {
                setMessage(`You win in ${currentRow} tries!`, "success");
            } else if (currentRow >= maxRows) {
                setMessage(`Out of tries! The word was ${secret}.`, "error");
            } else {
                setMessage("");
            }
        }

        function handleKey(e) {
            if (!guessInput) return;
            if (e.key === 'Enter') {
                handleSubmit();
            }
        }

        function scheduleMidnightReset() {
            setInterval(() => {
                const today = getTodayStr();
                if (today !== currentDateStr) {
                    currentDateStr = today;
                    secret = pickSecretForDate(currentDateStr);
                    resetGame();
                }
            }, 60 * 1000); // check once a minute
        }

        if (submitBtn) submitBtn.addEventListener('click', handleSubmit);
        if (startBtn) startBtn.addEventListener('click', () => resetGame(true));
        if (guessInput) guessInput.addEventListener('keyup', handleKey);
        resetGame(false);
    </script>
</body>
</html>
